<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="Admin">

	<typeAlias  alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias  alias="SellerVO" type="egovframework.let.shop.seller.service.SnsProfileVO"/>
	<typeAlias  alias="Seller" type="egovframework.let.shop.seller.service.SnsProfile"/>
					
	<resultMap id="SellerList" class="egovframework.let.shop.seller.service.SellerVO"> <!-- property는 vo값 -->
		<result property="s_id" column="S_ID" columnIndex="1"/>
		<result property="s_nickname" column="S_NICKNAME" columnIndex="2"/>						 <!-- collum 은 db의 컬럼값 -->
		<result property="s_pass" column="S_PASS" columnIndex="3"/>			 <!--  db의 컬럼 순서 -->
		<result property="s_email" column="S_EMAIL" columnIndex="4"/>
		<result property="s_photo" column="S_PHOTO" columnIndex="5"/>
		<result property="s_status" column="S_STATUS" columnIndex="6"/>
		<result property="s_phone" column="S_PHONE" columnIndex="7"/>
		<result property="s_addr" column="S_ADDR" columnIndex="8"/>
		<result property="s_gender" column="S_GENDER" columnIndex="9"/>
		<result property="s_moddate" column="S_MODDATE" columnIndex="10"/>
		<result property="s_regdate" column="S_REGDATE" columnIndex="11"/>
		<result property="s_gender" column="S_GENDER" columnIndex="12"/>
		<result property="s_birth" column="S_BIRTH" columnIndex="13"/>
	</resultMap>
	
	<select id="EgovSellerDAO.selectSellerList" parameterClass="SellerVO" resultMap="SellerList" >
		<![CDATA[
			SELECT
				   S_IDX
				  ,S_NICKNAME
				  ,S_PASS
				  ,S_EMAIL
				  ,S_PHOTO
				  ,S_STATUS
				  ,S_PHONE
				  ,S_ADDR
				  ,S_GENDER
				  ,S_MODDATE
				  ,S_REGDATE
				  ,S_GENDER
				  ,S_BIRTH
			FROM
				SELLER
			WHERE 1=1
		]]>				
			<isEqual prepend="AND" property="searchCnd" compareValue="0"> <!-- prepend로 and,or...쓰고 searchCnd값이 0이면 쿼리 문을 실행 시킨다. -->
				<![CDATA[	USERID LIKE CONCAT ('%', #searchWrd#,'%') 		]]>
			</isEqual>
			<isEqual prepend="AND" property="searchCnd" compareValue="1">
				<![CDATA[	SNSCODE LIKE CONCAT ('%', #searchWrd#,'%') 		]]>
			</isEqual>	
		<![CDATA[			
			ORDER BY REG_DATE DESC
			LIMIT #recordCountPerPage# OFFSET #firstIndex#
		]]>					
	</select>
	
	<select id="EgovSellerDAO.selectsSllerListCnt" parameterClass="SellerVO" resultClass="java.lang.Integer" >
		<![CDATA[
			SELECT 
				COUNT(S_IDX)
			FROM
				SELLER
			WHERE 1=1
		]]>				
			<isEqual prepend="AND" property="searchCnd" compareValue="0"> <!-- prepend로 and,or...쓰고 searchCnd값이 0이면 쿼리 문을 실행 시킨다. -->
				<![CDATA[	USERID LIKE CONCAT ('%', #searchWrd#,'%') 		]]>
			</isEqual>
			<isEqual prepend="AND" property="searchCnd" compareValue="1">
				<![CDATA[	SNSCODE LIKE CONCAT ('%', #searchWrd#,'%') 		]]>
			</isEqual>	
		<![CDATA[			
			ORDER BY REG_DATE DESC
			LIMIT #recordCountPerPage# OFFSET #firstIndex#
		]]>					
	</select>
	
	<!-- <insert id="EgovSnsUserDAO.insertSnsUser" parameterClass="SnsProfileVO">
		<![CDATA[
			INSERT INTO SNSPROFILE
			(USERID, SNSCODE, NICKNAME, EMAIL, REG_DATE, DEL_YN)
			VALUES
			(#userid#,#snscode#,#nickname#,#email#,SYSDATE(),'N')
		]]>
	</insert>
</sqlMap>
