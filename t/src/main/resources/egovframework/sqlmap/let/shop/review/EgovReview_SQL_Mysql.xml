<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="ReviewList">

	<typeAlias  alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias  alias="ReviewVO" type="egovframework.let.shop.review.service.ReviewVO"/>
	<typeAlias  alias="Review" type="egovframework.let.shop.review.service.review"/>
					
	<resultMap id="ReviewList" class="egovframework.let.shop.review.service.ReviewVO"> <!-- property는 vo값 -->
		<result property="s_id" column="S_ID" columnIndex="1"/>
		<result property="sns_idx" column="SNS_IDX" columnIndex="2"/>						 <!-- collum 은 db의 컬럼값 -->
		<result property="r_idx" column="R_IDX" columnIndex="3"/>			  <!-- db의 컬럼 순서 -->
		<result property="p_idx" column="P_IDX" columnIndex="4"/>
		<result property="r_content" column="R_CONTENT" columnIndex="5"/>
		<result property="r_regdate" column="R_REGDATE" columnIndex="6"/>
		<result property="r_delyn" column="R_DELYN" columnIndex="7"/>
		<result property="r_div" column="R_DIV" columnIndex="8"/>
		<result property="r_score" column="R_SCORE" columnIndex="9"/>
	</resultMap>
	
	<select id="EgovReviewDAO.selectReviewList" parameterClass="ReviewVO" resultMap="ReviewList" >
		<![CDATA[
			SELECT
				   S_ID 
				  ,SNS_IDX
				  ,R_IDX
				  ,P_IDX
				  ,R_CONTENT
				  ,R_REGDATE
				  ,R_DELYN
				  ,R_DIV
				  ,R_SCORE
			FROM
				SNSPROFILE
			WHERE 1=1
		]]>			
			<isEqual prepend="AND" property="searchCnd" compareValue="0"> <!-- prepend로 and,or...쓰고 searchCnd값이 0이면 쿼리 문을 실행 시킨다. -->
				<![CDATA[	USERID LIKE CONCAT ('%', #searchWrd#,'%') 		]]>
			</isEqual>
			<isEqual prepend="AND" property="searchCnd" compareValue="1">
				<![CDATA[	SNSCODE LIKE CONCAT ('%', #searchWrd#,'%') 		]]>
			</isEqual>	
		<![CDATA[			
			ORDER BY REG_DATE DESC
			LIMIT #recordCountPerPage# OFFSET #firstIndex#
		]]>					
	</select>
	
	<!-- <select id="EgovMngProDAO.selectMngProListCnt" parameterClass="SnsProfileVO" resultClass="java.lang.Integer" >
		<![CDATA[
			SELECT 
				COUNT(USERID)
			FROM
				SNSPROFILE
			WHERE 1=1
		]]>				
			<isEqual prepend="AND" property="searchCnd" compareValue="0"> prepend로 and,or...쓰고 searchCnd값이 0이면 쿼리 문을 실행 시킨다.
				<![CDATA[	USERID LIKE CONCAT ('%', #searchWrd#,'%') 		]]>
			</isEqual>
			<isEqual prepend="AND" property="searchCnd" compareValue="1">
				<![CDATA[	SNSCODE LIKE CONCAT ('%', #searchWrd#,'%') 		]]>
			</isEqual>	
	</select> -->
	
	<insert id="EgovSnsUserDAO.insertSnsUser" parameterClass="SnsProfileVO">
		<![CDATA[
			INSERT INTO SNSPROFILE
			(USERID, SNSCODE, NICKNAME, EMAIL, REG_DATE, DEL_YN)
			VALUES
			(#userid#,#snscode#,#nickname#,#email#,SYSDATE(),'N')
		]]>
	</insert>
	
	<!-- <insert id="EgovMngProductDAO.insertMngProduct" parameterClass="Product">
		<![CDATA[
			INSERT INTO 테이블명
			(컬럼명, 날짜)
			VALUES
			( #변수명#, SYSDATE()  
			 )			
		]]>
	</insert> -->
	
	<!-- <update id="EgovMngProductDAO.updateMngProduct" parameterClass="Product">
 		<![CDATA[
			UPDATE 테이블명 SET 
				컬럼명 = #변수명#,
				LAST_UPDT_PNTTM = SYSDATE()
			WHERE 컬럼명 = #변수명#
 		]]>
 	</update> -->
</sqlMap>
