<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="Notice">

	<typeAlias  alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias  alias="NoticeVO" type="egovframework.let.shop.notice.service.NoticeVO"/>
	<typeAlias  alias="Notice" type="egovframework.let.shop.notice.service.Notice"/>
					
	<resultMap id="NoticeList" class="egovframework.let.shop.notice.service.NoticeVO"> <!-- property는 vo값 -->
		<result property="n_idx" column="N_IDX" columnIndex="1"/>
		<result property="n_div" column="N_DIV" columnIndex="2"/>						 <!-- collum 은 db의 컬럼값 -->
		<result property="n_sub" column="N_SUB" columnIndex="3"/>			 <!--  db의 컬럼 순서 -->
		<result property="n_content" column="N_CONTENT" columnIndex="4"/>
		<result property="n_date" column="N_DATE" columnIndex="5"/>
		<result property="a_id" column="A_ID" columnIndex="6"/>
	</resultMap>
	
	<select id="EgovNoticeDAO.selectNoticeList" parameterClass="NoticeVO" resultMap="NoticeListw" >
		<![CDATA[
			SELECT
				   N_IDX
				  ,N_DIV
				  ,N_SUB
				  ,N_CONTENT
				  ,N_DATE
				  ,A_ID
			FROM
				Notice
			WHERE 1=1
		]]>				
			<isEqual prepend="AND" property="searchCnd" compareValue="0"> <!-- prepend로 and,or...쓰고 searchCnd값이 0이면 쿼리 문을 실행 시킨다. -->
				<![CDATA[	USERID LIKE CONCAT ('%', #searchWrd#,'%') 		]]>
			</isEqual>
			<isEqual prepend="AND" property="searchCnd" compareValue="1">
				<![CDATA[	SNSCODE LIKE CONCAT ('%', #searchWrd#,'%') 		]]>
			</isEqual>	
		<![CDATA[			
			ORDER BY REG_DATE DESC
			LIMIT #recordCountPerPage# OFFSET #firstIndex#
		]]>					
	</select>
	
	
	<!-- <insert id="EgovSnsUserDAO.insertSnsUser" parameterClass="SnsProfileVO">
		<![CDATA[
			INSERT INTO SNSPROFILE
			(USERID, SNSCODE, NICKNAME, EMAIL, REG_DATE, DEL_YN)
			VALUES
			(#userid#,#snscode#,#nickname#,#email#,SYSDATE(),'N')
		]]>
	</insert>
</sqlMap>
